---
layout: post
title: "C"
tag: Programming Language
toc: true
---

This article introduces the **C** programming language.

<!--more-->

# Overview

The **C** programming language was developed in 1972 by *Dennis Ritchie* and *Brian Kernighan* at the AT&T Corporation for programming computer operating systems. Its capacity to structure data and programs through the composition of smaller units is comparable to that of ALGOL (Algorithmic Language). It uses a compact notation and provides the programmer with the ability to operate with the addresses of data as well as with their values. This ability is important in systems programming, and C shares with assembly language the power to exploit all the features of a computer’s internal architecture.

# C Standards

Refer to the following links for the C standards:

* <a href="{{ site.base-url }}/2015/12/18/linux-series-05-libraries.html#c-standards">C Standards</a>
* [C Standard Committee (ISO/IEC JTC1/SC22/WG14 - C)](http://www.open-std.org/JTC1/SC22/WG14/www/standards)

# C Libraries

## C Standard Library

Refer to the following links for C standard library:

* [C Standard Library Header Files](http://en.cppreference.com/w/c/header)
* [Online References of C/C++ Language & Libraries](http://chenweixiang.github.io/2015/12/18/linux-series-05-libraries.html#online-references-of-cc-language--libraries)
* [Experimental C Standard Libraries](http://en.cppreference.com/w/c/experimental)

And refer to the following links for types, macros and functions defined in the C standard library:

* [Type support](http://en.cppreference.com/w/c/types)
* [Dynamic memory management](http://en.cppreference.com/w/c/memory)
* [Error handling](http://en.cppreference.com/w/c/error)
* [Program utilities](http://en.cppreference.com/w/c/program)
* [Variadic functions](http://en.cppreference.com/w/c/variadic)
* [Date and time utilities](http://en.cppreference.com/w/c/chrono)
* [Strings library](http://en.cppreference.com/w/c/string)
* [Algorithms](http://en.cppreference.com/w/c/algorithm)
* [Numerics](http://en.cppreference.com/w/c/numeric)
* [File input/output](http://en.cppreference.com/w/c/io)
* [Localization support](http://en.cppreference.com/w/c/locale)
* [Atomic operations library](http://en.cppreference.com/w/c/atomic)

## Open Source C Libraries

Refer to [list of open source C libraries](http://en.cppreference.com/w/c/links/libs).

# C Language

## Keywords

This is a list of reserved keywords in C. Since they are used by the language, these keywords are not available for re-definition.

| Keywords | Standard  |
| :------- | :-------- |
| auto     | since C89 |
| break    | since C89 |
| case     | since C89 |
| char     | since C89 |
| const    | since C89 |
| continue | since C89 |
| default  | since C89 |
| do       | since C89 |
| double   | since C89 |
| else     | since C89 |
| enum     | since C89 |
| extern   | since C89 |
| float    | since C89 |
| for      | since C89 |
| goto     | since C89 |
| if       | since C89 |
| inline   | since **C99** |
| int      | since C89 |
| long     | since C89 |
| register | since C89 |
| restrict | since C99 |
| return   | since C89 |
| short    | since C89 |
| signed   | since C89 |
| sizeof   | since C89 |
| static   | since C89 |
| struct   | since C89 |
| switch   | since C89 |
| typedef  | since C89 |
| union    | since C89 |
| unsigned | since C89 |
| void     | since C89 |
| volatile | since C89 |
| while    | since C89 |
| _Alignas | since **C11** |
| _Alignof | since **C11** |
| _Atomic  | since **C11** |
| _Bool    | since **C99** |
| _Complex | since **C99** |
| _Generic | since **C11** |
| _Imaginary | since **C99** |
| _Noreturn  | since **C11** |
| _Static_assert | since **C11** |
| _Thread_local  | since **C11** |

<p/>

Most of the recently reserved words begin with an underscore followed by a capital letter, because identifiers of that form were previously reserved by the C standard for use only by implementations. Since existing program source code should not have been using these identifiers, it would not be affected when C implementations started supporting these extensions to the programming language. Some standard headers do define more convenient synonyms for underscored identifiers. The language previously included a reserved word called *entry*, but this was seldom implemented, and has now been removed as a reserved word.

## Operators

| Operators                                               | Associativity     | Description |
| :------------------------------------------------------ | :---------------: | :---------- |
| `()` `[]` `->` `.` `::`                                 | left to right     | Function call, scope, array/member access |
| `!` `~` `++` `--` `+` `-` `(type)` `*` `&` `sizeof`     | **right to left** | Unary operators, sizeof and type casts |
| `*` `/` `%`                                             | left to right     | Multiplication, division, modulo |
| `+` `-`                                                 | left to right     | Addition and subtraction |
| `<<` `>>`                                               | left to right     | Bitwise shift left and right |
| `<` `<=` `>` `>=`                                       | left to right     | Comparisons: less-than, ... |
| `==` `!=`                                               | left to right     | Comparisons: equal and not equal |
| `&`                                                     | left to right     | Bitwise AND |
| `^`                                                     | left to right     | Bitwise exclusive OR (XOR) |
| `|`                                                     | left to right     | Bitwise inclusive (normal) OR |
| `&&`                                                    | left to right     | Logical AND |
| `||`                                                    | left to right     | Logical OR |
| `?:`                                                    | **right to left** | Conditional expression (ternary) |
| `=` `+=` `-=` `*=` `/=` `%=` `<<=` `>>=` `&=` `^=` `|=` | **right to left** | Assignment operators |
| `,`                                                     | left to right     | Comma operator |

<p/>

Run the following command to get the operator priority under Linux environment:

    chenwx@chenwx ~ $ man operator

    NAME
           operator - C operator precedence and order of evaluation

    DESCRIPTION
           This manual page lists C operators and their precedence in evaluation.

           Operator                             Associativity
           () [] -> .                           left to right
           ! ~ ++ -- + - (type) * & sizeof      right to left
           * / %                                left to right
           + -                                  left to right
           << >>                                left to right
           < <= > >=                            left to right
           == !=                                left to right
           &                                    left to right
           ^                                    left to right
           |                                    left to right
           &&                                   left to right
           ||                                   left to right
           ?:                                   right to left
           = += -= *= /= %= <<= >>= &= ^= |=    right to left
           ,                                    left to right

    COLOPHON
           This page is part of release 3.54 of the Linux man-pages project.  A description of the project, and information about reporting bugs, can befound at http://www.kernel.org/doc/man-pages/.

## Comments

**C-style comments** or **multi-line comments**

```
/* comment */
```

**C++-style comments** or **single-line comments** (since **C99**)

```
// comment until end of the line
```

## Preprocessor

The preprocessor is executed at [translation phase 4](#phases-of-translation), before the compilation. The result of preprocessing is single file which is then passed to the actual compiler. Refer to [Preprocessor](http://en.cppreference.com/w/c/preprocessor).

The preprocessor has the source file translation capabilities:

* Conditionally compile of parts of source file: ```#if```, ```#ifdef```, ```#ifndef```, ```#else```, ```#elif``` and ```#endif```
* Replace text macros while possibly concatenating or quoting identifiers: ```#define``` and ```#undef```, and operators ```#``` and ```##```
* Include other files: ```#include```
* Cause an error: ```#error```

The following aspects of the preprocessor can be controlled:

* Implementation defined behavior: ```#pragma``` and operator ```_Pragma``` (since C99)
* File name and line information available to the preprocessor: ```#line```

NOTE: Those preprocessor directives are defined by the standard. The standard does not define behavior for other directives: they might be ignored, have some useful meaning, or make the program ill-formed. Even if otherwise ignored, they are removed from the source code when the preprocessor is done. A common non-standard extension is the directive ```#warning``` which emits a user-defined message during compilation.

## Phases of Translation

The C source file is processed by the compiler *as if* the following phases take place, in this exact order. Actual implementation may combine these actions or process them differently as long as the behavior is the same. Refer to [Phases of translation](http://en.cppreference.com/w/c/language/translation_phases).

### Phase 1

* The individual bytes of the source code file (which is generally a text file in some multibyte encoding such as UTF-8) are mapped, in implementation defined manner, to the characters of the *source character set*. In particular, OS-dependent end-of-line indicators are replaced by newline characters. The *source character set* is a multibyte character set which includes the *basic source character set* as a single-byte subset, consisting of the following 96 characters:

    * 5 whitespace characters (space, horizontal tab, vertical tab, form feed, new-line)
    * 10 digit characters from ```0``` to ```9```
    * 52 letters from ```a``` to ```z``` and from ```A``` to ```Z```
    * 29 punctuation characters: ```_ { } [ ] # ( ) < > % : ; . ? * + - / ^ & | ~ ! = , \ " ’```
    <p/>

* **Trigraph sequences** are replaced by corresponding single-character representations.

| Primary | Trigraph  |
| :-----: | :-------: |
| ```{``` | ```??<``` |
| ```}``` | ```??>``` |
| ```[``` | ```??(``` |
| ```]``` | ```??)``` |
| ```#``` | ```??=``` |
| ```\``` | ```??/``` |
| ```^``` | ```??'``` |
| ```|``` | ```??!``` |
| ```~``` | ```??-``` |

<p/>

### Phase 2

* Whenever backslash ```\``` appears at the end of a line (immediately followed by the newline character), both backslash and newline are deleted, combining two physical source lines into one logical source line. This is a single-pass operation: a line ending in two backslashes followed by an empty line does not combine three lines into one.

* If a non-empty source file does not end with a newline character after this step (whether it had no newline originally, or it ended with a backslash), the behavior is undefined.

### Phase 3

* The source file is decomposed into comments, sequences of whitespace characters (space, horizontal tab, new-line, vertical tab, and form-feed), and *preprocessing tokens*, which are the following

    * header names: ```<stdio.h>``` or ```"myfile.h"```
    * identifiers
    * numbers
    * character constants and string literals
    * operators and punctuators (including alternative tokens), such as ```+```, ```<<=```, ```<%```, ```##```, or ```and```
    * individual non-whitespace characters that do not fit in any other category
    <p/>

* Each comment is replaced by one space character.

* Newlines are kept, and it's implementation-defined whether non-newline whitespace sequences may be collapsed into single space characters.

### Phase 4

* Preprocessor is executed.
* Each file introduced with the ```#include``` directive goes through **phases 1** through **4**, recursively.
* At the end of this phase, all preprocessor directives are removed from the source.

### Phase 5

* All characters and escape sequences in character constants and string literals are converted from *source character set* to *execution character set* (which may be a multibyte character set such as UTF-8, as long as all 96 characters from the *basic source character set* listed in **phase 1** have single-byte representations). If the character specified by an escape sequence isn't a member of the *execution character set*, the result is implementation-defined, but is guaranteed to not be a null (wide) character.

    Note: the conversion performed at this stage can be controlled by command line options in some implementations: *gcc* and *clang* use ```-finput-charset``` to specify the encoding of the source character set, ```-fexec-charset``` and ```-fwide-exec-charset``` to specify the encodings of the *execution character set* in the string and character literals that don't have an encoding prefix (since **C11**).

### Phase 6

* Adjacent string literals are concatenated.

### Phase 7

* Compilation takes place: the tokens are syntactically and semantically analyzed and translated as a **translation unit**.

### Phase 8

* Linking takes place: Translation units and library components needed to satisfy external references are collected into a program image which contains information needed for execution in its execution environment (the OS).

## Escape Sequences

Escape sequences are used to represent certain special characters within string literals and character constants. The following escape sequences are available. ISO C requires a diagnostic if the backslash is followed by any character not listed here:

| Escape sequence  |      Description      | Representation |
| :--------------- | :-------------------- | :------------- |
| ```\'```         | single quote          | byte 0x27 (in ASCII encoding) |
| ```\"```         | double quote          | byte 0x22 (in ASCII encoding) |
| ```\?```         | question mark         | byte 0x3f (in ASCII encoding) |
| ```\\```         | backslash             | byte 0x5c (in ASCII encoding) |
| ```\a```         | audible bell          | byte 0x07 (in ASCII encoding) |
| ```\b```         | backspace             | byte 0x08 (in ASCII encoding) |
| ```\f```         | form feed / new page  | byte 0x0c (in ASCII encoding) |
| ```\n```         | line feed / new line  | byte 0x0a (in ASCII encoding) |
| ```\r```         | carriage return       | byte 0x0d (in ASCII encoding) |
| ```\t```         | horizontal tab        | byte 0x09 (in ASCII encoding) |
| ```\v```         | vertical tab          | byte 0x0b (in ASCII encoding) |
| ```\nnn```       | arbitrary octal value | byte nnn |
| ```\xnn```       | arbitrary hexadecimal value | byte nn |
| ```\unnnn```     | Unicode character that is not in the basic character set. May result in several characters. | code point U+nnnn |
| ```\Unnnnnnnn``` | Unicode character that is not in the basic character set. May result in several characters. | code point U+nnnnnnnn |

<p/>

## Data Types

# C Code Conventions

# Coliru Online Compiler

[Coliru Online Compiler](http://coliru.stacked-crooked.com/)

# Books

* **The C Programming Language, 2nd edition**
* **C Primer**

# References

* <a href="{{ site.base-url }}/2015/12/18/linux-series-05-libraries.html">Linux: C/C++ Libraries</a>
* [C programming language on Wikipedia](https://en.wikipedia.org/wiki/C_%28programming_language%29)
* [C/C++ Reference](http://en.cppreference.com/w/)
